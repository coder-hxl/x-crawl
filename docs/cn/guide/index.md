# ç®€ä»‹

## ä»€ä¹ˆæ˜¯ x-crawl ?

x-crawl æ˜¯ä¸€ä¸ªçµæ´»çš„ Node.js AI è¾…åŠ©çˆ¬è™«åº“ã€‚çµæ´»çš„ä½¿ç”¨æ–¹å¼å’Œå¼ºå¤§çš„ AI è¾…åŠ©åŠŸèƒ½ï¼Œä½¿çˆ¬è™«å·¥ä½œå˜å¾—æ›´åŠ é«˜æ•ˆã€æ™ºèƒ½å’Œä¾¿æ·ã€‚

å®ƒç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š

- çˆ¬è™«ï¼šç”±çˆ¬è™« API ä»¥åŠå„ç§åŠŸèƒ½ç»„æˆï¼Œå³ä½¿ä¸ä¾é  AI ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œã€‚
- AIï¼šç›®å‰åŸºäº OpenAI æä¾›çš„ AI å¤§æ¨¡å‹ï¼Œè®© AI ç®€åŒ–å¾ˆå¤šç¹ççš„æ“ä½œã€‚

> å¦‚æœæ‚¨è§‰å¾— x-crawl å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œæˆ–è€…æ‚¨å–œæ¬¢ x-crawl ï¼Œå¯ä»¥åœ¨ GitHub ä¸Šç»™ [x-crawl å­˜å‚¨åº“](https://github.com/coder-hxl/x-crawl) ç‚¹ä¸ª star ã€‚æ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä»¬æŒç»­æ”¹è¿›çš„åŠ¨åŠ›ï¼æ„Ÿè°¢æ‚¨çš„æ”¯æŒï¼

## ç‰¹å¾

- **ğŸ¤– AI è¾…åŠ©** - å¼ºå¤§çš„ AI è¾…åŠ©åŠŸèƒ½ï¼Œä½¿çˆ¬è™«å·¥ä½œå˜å¾—æ›´åŠ é«˜æ•ˆã€æ™ºèƒ½å’Œä¾¿æ·ã€‚
- **ğŸ–‹ï¸ å†™æ³•çµæ´»** - å•ä¸ªçˆ¬å– API éƒ½é€‚é…å¤šç§é…ç½®ï¼Œæ¯ç§é…ç½®æ–¹å¼éƒ½å„æœ‰åƒç§‹ã€‚
- **âš™ï¸ å¤šç§ç”¨é€”** - æ”¯æŒçˆ¬åŠ¨æ€é¡µé¢ã€é™æ€é¡µé¢ã€æ¥å£æ•°æ®ä»¥åŠæ–‡ä»¶æ•°æ®ã€‚
- **âš’ï¸ æ§åˆ¶é¡µé¢** - çˆ¬å–åŠ¨æ€é¡µé¢æ”¯æŒè‡ªåŠ¨åŒ–æ“ä½œã€é”®ç›˜è¾“å…¥ã€äº‹ä»¶æ“ä½œç­‰ã€‚
- **ğŸ‘€ è®¾å¤‡æŒ‡çº¹** - é›¶é…ç½®æˆ–è‡ªå®šä¹‰é…ç½®ï¼Œé¿å…æŒ‡çº¹è¯†åˆ«ä»ä¸åŒä½ç½®è¯†åˆ«å¹¶è·Ÿè¸ªæˆ‘ä»¬ã€‚
- **ğŸ”¥ å¼‚æ­¥åŒæ­¥** - æ— éœ€åˆ‡æ¢çˆ¬å– API å³å¯è¿›è¡Œå¼‚æ­¥æˆ–åŒæ­¥çš„çˆ¬å–æ¨¡å¼ã€‚
- **â±ï¸ é—´éš”çˆ¬å–** - æ— é—´éš”ã€å›ºå®šé—´éš”ä»¥åŠéšæœºé—´éš”ï¼Œå†³å®šæ˜¯å¦é«˜å¹¶å‘çˆ¬å–ã€‚
- **ğŸ”„ å¤±è´¥é‡è¯•** - è‡ªå®šä¹‰é‡è¯•æ¬¡æ•°ï¼Œé¿å…å› çŸ­æš‚çš„é—®é¢˜è€Œé€ æˆçˆ¬å–å¤±è´¥ã€‚
- **â¡ï¸ è½®æ¢ä»£ç†** - æ­é…å¤±è´¥é‡è¯•ï¼Œè‡ªå®šä¹‰é”™è¯¯æ¬¡æ•°ä»¥åŠ HTTP çŠ¶æ€ç è‡ªåŠ¨è½®æ¢ä»£ç†ã€‚
- **ğŸš€ ä¼˜å…ˆé˜Ÿåˆ—** - æ ¹æ®å•ä¸ªçˆ¬å–ç›®æ ‡çš„ä¼˜å…ˆçº§å¯ä»¥ä¼˜å…ˆäºå…¶ä»–ç›®æ ‡æå‰çˆ¬å–ã€‚
- **ğŸ§¾ çˆ¬å–ä¿¡æ¯** - å¯æ§çš„çˆ¬å–ä¿¡æ¯ï¼Œä¼šåœ¨ç»ˆç«¯è¾“å‡ºå½©è‰²å­—ç¬¦ä¸²ä¿¡æ¯ã€‚
- **ğŸ¦¾ TypeScript** - æ‹¥æœ‰ç±»å‹ï¼Œé€šè¿‡æ³›å‹å®ç°å®Œæ•´çš„ç±»å‹ã€‚

## ç¤ºä¾‹

```js
// 1.å¯¼å…¥æ¨¡å— ES/CJS
import { createCrawl } from 'x-crawl'

// 2.åˆ›å»ºä¸€ä¸ªçˆ¬è™«å®ä¾‹
const crawlApp = createCrawl({
  maxRetry: 3,
  intervalTime: { max: 2000, min: 1000 }
})

// 3.è®¾ç½®çˆ¬å–ä»»åŠ¡
// è°ƒç”¨ startPolling API å¼€å§‹è½®è¯¢åŠŸèƒ½ï¼Œæ¯éš”ä¸€å¤©ä¼šè°ƒç”¨å›è°ƒå‡½æ•°
crawlApp.startPolling({ d: 1 }, async (count, stopPolling) => {
  // è°ƒç”¨ crawlPage API æ¥çˆ¬å–é¡µé¢
  const pageResults = await crawlApp.crawlPage({
    targets: [
      'https://www.airbnb.cn/s/*/experiences',
      'https://www.airbnb.cn/s/plus_homes'
    ],
    viewport: { width: 1920, height: 1080 }
  })

  // é€šè¿‡éå†çˆ¬å–é¡µé¢ç»“æœè·å–å›¾ç‰‡ URL
  const imgUrls = []
  for (const item of pageResults) {
    const { id } = item
    const { page } = item.data
    const elSelector = id === 1 ? '.i9cqrtb' : '.c4mnd7m'

    // ç­‰å¾…é¡µé¢å…ƒç´ å‡ºç°
    await page.waitForSelector(elSelector)

    // è·å–é¡µé¢å›¾ç‰‡çš„ URL
    const urls = await page.$$eval(`${elSelector} picture img`, (imgEls) =>
      imgEls.map((item) => item.src)
    )
    imgUrls.push(...urls.slice(0, 6))

    // å…³é—­é¡µé¢
    page.close()
  }

  // è°ƒç”¨ crawlFile API çˆ¬å–å›¾ç‰‡
  await crawlApp.crawlFile({ targets: imgUrls, storeDirs: './upload' })
})
```

è¿è¡Œæ•ˆæœ:

![](https://raw.githubusercontent.com/coder-hxl/x-crawl/main/assets/run-example.gif)

::: warning
x-crawl ä»…ä¾›åˆæ³•ç”¨é€”ï¼Œç¦æ­¢ä½¿ç”¨è¯¥å·¥å…·è¿›è¡Œä»»ä½•è¿æ³•æ´»åŠ¨ï¼Œè¯·åŠ¡å¿…éµå®ˆç›®æ ‡ç½‘ç«™çš„ robots.txt æ–‡ä»¶è§„å®šã€‚ç½‘ç«™çš„ç±»åå¯èƒ½éšæ—¶å‘ç”Ÿå˜æ›´ï¼Œæœ¬ä¾‹ä»…ç”¨äºæ¼”ç¤º x-crawl çš„ä½¿ç”¨æ–¹æ³•ï¼Œå¹¶éé’ˆå¯¹ç‰¹å®šç½‘ç«™ã€‚
:::
